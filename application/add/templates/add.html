<!DOCTYPE html>
<html>

    <head>
        <title>Add DB</title>
        <script type="text/javascript" language="javascript" src="{{ url_for('add_bp.static', filename='jsme/jsme.nocache.js') }}"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
        <link rel="stylesheet" type="text/css" href="{{ url_for('main_bp.static', filename='style/style.css') }}">

        <style>
            em {
                background-color: rgb(102, 255, 255);
            }

        </style>

    <script>

        //this function will be called after the JavaScriptApplet code has been loaded.
        function jsmeOnLoad() {

            jsmeApplet = new JSApplet.JSME("jsme_container", "600px", "440px", {
                "options": "newlook,query,hydrogens",
                "guicolor": "#bfbfbf",
            });

            jsmeApplet.setAfterStructureModifiedCallback(showEvent);

            document.getElementById("log").value = "";
        }

        var patt = /\[([A-Za-z][a-z]?)H?\d*:\d+\]/g; //regexp pattern for numbered atom
        function showEvent(event) {

            let log = document.getElementById("log");
            log.value = event.src.smiles();

        }

        function showValue(value) {
            document.getElementById("mol_weight_range").innerText = value;
        }

    </script>


    <body onload="onExtendTable()">
    <section class="hero is-primary is-fullheight">

        <div class="hero-head">
            <nav class="navbar">
                <div class="container">

                    <div id="navbarMenuHeroA" class="navbar-menu">
                        <div class="navbar-end">
                            <a href="{{ url_for('main_bp.index') }}" class="navbar-item">
                                Home
                            </a>
                            {% if current_user.is_authenticated %}
                            <a href="{{ url_for('main_bp.profile') }}" class="navbar-item">
                                Profile
                            </a>
                            {% endif %}
                            {% if current_user.is_authenticated %}
                            <a href="{{ url_for('search_bp.search') }}" class="navbar-item">
                                Structure Search
                            </a>
                            {% endif %}
                            {% if current_user.is_authenticated %}
                            <a href="{{ url_for('search_bp.search') }}" class="navbar-item">
                                SQLite Workplace
                            </a>
                            {% endif %}
                            {% if current_user.is_authenticated %}
                            <a href="{{ url_for('add_bp.add') }}" class="navbar-item">
                                Add database
                            </a>
                            {% endif %}
                            {% if not current_user.is_authenticated %}
                            <a href="{{ url_for('auth_bp.login') }}" class="navbar-item">
                                Login
                            </a>
                            <a href="{{ url_for('auth_bp.signup') }}" class="navbar-item">
                                Sign Up
                            </a>
                            {% endif %}
                            {% if current_user.is_authenticated %}
                            <a href="{{ url_for('auth_bp.logout') }}" class="navbar-item">
                                Logout
                            </a>
                            {% endif %}


                        </div>
                    </div>
                </div>
            </nav>
        </div>

        <div class="hero-body">
            <div class="container has-text-centered">
               <div class="columns">
                    <div class="column">
                        <div class="box">
                            <form>
                                <label class="label has-text-left">Please, choose a file:</label>
                                <p><input type="file" name="f"> <input type="submit" class="button is-info" value="Send"></p>
                            </form>

                            <label class="label has-text-left">Draw a structure or enter SMILES:</label>

                            <div class="field is-grouped">
                                <p class="control is-expanded">
                                  <input class="input" id="log" type="text" placeholder="SMILES">
                                </p>
                                <p class="control">
                                  <a class="button is-info" onclick="onSearch(0)">
                                    Add
                                  </a>
                                </p>
                            </div>

                            <div id="jsme_container"></div> <!-- рисовалка -->
                        </div>
                    </div>

                    <div class="column">
                        <div class="box">
                            <table id="add_table" class="table is-striped">
                                <tr>
                                    <th>Stages</th><th><input class="input" id="stages" type="text" placeholder="Input stages"></th>
                                </tr>
                                <tr>
                                    <th>Yield</th><th><input class="input" id="yield" type="text" placeholder="Input yield"></th>
                                </tr>
                                <tr>
                                    <th>Citations</th><th><input class="input" id="citations" type="text" placeholder="Input citations"></th>
                                </tr>
                                <tr>
                                    <th>Other conditions</th><th><input class="input" id="conditions" type="text" placeholder="Input other conditions"></th>
                                </tr>
                                <tr>
                                    <th>Temperature</th><th><input class="input" id="temperature" type="text" placeholder="Input temperature"></th>
                                </tr>
                                <tr>
                                    <th>Time</th><th><input class="input" id="time" type="text" placeholder="Input time"></th>
                                </tr>
                                <tr>
                                    <th>Solvents</th><th><input class="input" id="solvents" type="text" placeholder="Input solvents"></th>
                                </tr>
                                <tr>
                                    <th>Solvents id</th><th><input class="input" id="solvents-id" type="text" placeholder="Input solvents id"></th>
                                </tr>
                                <tr>
                                    <th>Catalysts</th><th><input class="input" id="catalysts" type="text" placeholder="Input catalysts"></th>
                                </tr>
                                <tr>
                                    <th>Catalysts id</th><th><input class="input" id="catalysts-id" type="text" placeholder="Input catalysts id"></th>
                                </tr>
                                <tr>
                                    <th>Reaction type</th><th><input class="input" id="reaction-type" type="text" placeholder="Input reaction type"></th>
                                </tr>
                            </table>
                            <div>
                                <button class="button is-success">Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

</html>